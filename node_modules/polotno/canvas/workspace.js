"use strict";var __importDefault=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(exports,"__esModule",{value:!0}),exports.Workspace=void 0;var react_1=__importDefault(require("react")),mobx_react_lite_1=require("mobx-react-lite"),page_1=__importDefault(require("./page")),hotkeys_1=require("./hotkeys"),MIN_PADDING=20;exports.Workspace=mobx_react_lite_1.observer((function(e){var t=e.store,r=react_1.default.useState({width:100,height:100}),a=r[0],i=r[1],o=react_1.default.useRef(null),n=function(){if(null!==o.current){var e=o.current.getBoundingClientRect();i({width:e.width,height:e.height});var r=(e.width-2*MIN_PADDING)/t.width,a=(e.height-2*MIN_PADDING)/t.height;t.setScale(Math.min(r,a))}};react_1.default.useEffect(n,[t.width,t.height]),react_1.default.useEffect((function(){return window.addEventListener("resize",n),function(){return window.removeEventListener("resize",n)}}),[]);var l=Math.max(MIN_PADDING,(a.width-t.width*t.scale)/2),s=Math.max(MIN_PADDING,(a.height-t.height*t.scale)/2);return react_1.default.createElement("div",{ref:o,style:{width:"100%",height:"100%",position:"relative",outline:"none"},tabIndex:0,onKeyDown:function(e){hotkeys_1.handleHotkey(e,t)}},react_1.default.createElement("div",{onScroll:function(e){var r=e.currentTarget.childNodes[0].childNodes[0].offsetHeight,a=e.currentTarget.scrollTop,i=Math.floor((a+100)/r),o=t.pages[i];o&&o.select()},style:{position:"absolute",top:0,left:0,width:"100%",height:"100%",overflow:"auto"}},t.pages.map((function(e){return react_1.default.createElement(page_1.default,{key:e.id,page:e,xPadding:l,yPadding:s,width:t.width*t.scale+2*l,height:t.height*t.scale+2*s,store:t})})),0===t.pages.length&&react_1.default.createElement("div",{style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)"}},"There are no pages yet...")))})),exports.default=exports.Workspace;