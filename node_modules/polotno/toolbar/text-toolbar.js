"use strict";var __importDefault=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(exports,"__esModule",{value:!0});var react_1=__importDefault(require("react")),mobx_react_lite_1=require("mobx-react-lite"),core_1=require("@blueprintjs/core"),select_1=require("@blueprintjs/select"),fonts_1=require("../utils/fonts"),color_picker_1=__importDefault(require("./color-picker")),filters_picker_1=__importDefault(require("./filters-picker")),MdcFormatLineSpacing_1=__importDefault(require("@meronex/icons/mdc/MdcFormatLineSpacing")),ALIGN_OPTIONS=["left","center","right","justify"],PROPS_MAP={font:mobx_react_lite_1.observer((function(e){var t=e.element,n=e.store,r=n.fonts.map((function(e){return e.name})).concat(fonts_1.getFontsList());return react_1.default.useEffect((function(){r.forEach((function(e){n.loadFont(e)}))}),[r]),react_1.default.createElement(select_1.Select,{items:r,itemRenderer:function(e,t){var n=t.handleClick,r=t.modifiers,i=t.query;return-1===e.toLowerCase().indexOf(i.toLowerCase())?null:react_1.default.createElement(core_1.MenuItem,{key:e,text:e,active:r.active,disabled:r.disabled,onClick:n,style:{fontFamily:'"'+e+'"'}})},activeItem:t.fontFamily,onItemSelect:function(e){t.set({fontFamily:e})}},react_1.default.createElement(core_1.Button,{text:t.fontFamily.split(" ")[0],rightIcon:"caret-down",minimal:!0,style:{marginRight:"5px",fontFamily:'"'+t.fontFamily+'"'}}))})),fontSize:mobx_react_lite_1.observer((function(e){var t=e.element;return react_1.default.createElement(core_1.NumericInput,{onValueChange:function(e){t.set({fontSize:e})},value:Math.round(t.fontSize),style:{width:"50px"},min:5})})),fontVariant:mobx_react_lite_1.observer((function(e){var t=e.element;return react_1.default.createElement(core_1.ButtonGroup,null,react_1.default.createElement(core_1.Button,{minimal:!0,icon:"align-"+t.align,onClick:function(){var e=(ALIGN_OPTIONS.indexOf(t.align)+1+ALIGN_OPTIONS.length)%ALIGN_OPTIONS.length,n=ALIGN_OPTIONS[e];t.set({align:n})}}),react_1.default.createElement(core_1.Button,{minimal:!0,icon:"bold",active:t.fontStyle.indexOf("bold")>=0,onClick:function(){var e=t.fontStyle.split(" ");e.indexOf("bold")>=0?e=e.filter((function(e){return"bold"!==e})):e.push("bold"),t.set({fontStyle:e.join(" ")})}}),react_1.default.createElement(core_1.Button,{minimal:!0,icon:"italic",active:t.fontStyle.indexOf("italic")>=0,onClick:function(){var e=t.fontStyle.split(" ");e.indexOf("italic")>=0?e=e.filter((function(e){return"italic"!==e})):e.push("italic"),t.set({fontStyle:e.join(" ")})}}),react_1.default.createElement(core_1.Button,{minimal:!0,icon:"underline",active:t.textDecoration.indexOf("underline")>=0,onClick:function(){var e=t.textDecoration.split(" ");e.indexOf("underline")>=0?e=e.filter((function(e){return"underline"!==e})):e.push("underline"),t.set({textDecoration:e.join(" ")})}}))})),filter:function(e){var t=e.element;return react_1.default.createElement(filters_picker_1.default,{element:t})},fontColor:mobx_react_lite_1.observer((function(e){var t=e.element;return react_1.default.createElement(color_picker_1.default,{value:t.fill,onChange:function(e){return t.set({fill:e})}})})),spacing:mobx_react_lite_1.observer((function(e){var t=e.element;return react_1.default.createElement(core_1.Popover,{content:react_1.default.createElement("div",{style:{padding:"15px 25px",width:"200px"}},react_1.default.createElement("p",null,"Line height"),react_1.default.createElement(core_1.Slider,{value:100*t.lineHeight,labelStepSize:50,onChange:function(e){t.set({lineHeight:e/100})},min:50,max:250,stepSize:10,showTrackFill:!0}),react_1.default.createElement("p",null,"Letter spacing"),react_1.default.createElement(core_1.Slider,{value:100*t.letterSpacing,labelStepSize:50,onChange:function(e){t.set({letterSpacing:e/100})},min:-50,max:250,stepSize:10,showTrackFill:!1})),position:core_1.Position.BOTTOM},react_1.default.createElement(core_1.Button,{icon:react_1.default.createElement(MdcFormatLineSpacing_1.default,{className:"bp3-icon",style:{fontSize:"20px"}}),minimal:!0}))}))};exports.default=mobx_react_lite_1.observer((function(e){var t=e.store,n=e.hideTextEffects,r=e.hideTextSpacing,i=t.selectedElements[0],l=["fontColor","font","fontSize","fontVariant",!r&&"spacing",!n&&"filter"].filter((function(e){return!!e}));return react_1.default.createElement(core_1.Navbar.Group,{align:core_1.Alignment.LEFT,style:{width:"calc(100% - 400px)"}},react_1.default.createElement(core_1.OverflowList,{items:l,style:{width:"100%"},visibleItemRenderer:function(e){var n=PROPS_MAP[e];return react_1.default.createElement(n,{element:i,store:t,key:e})},collapseFrom:core_1.Boundary.END,overflowRenderer:function(e){return react_1.default.createElement(core_1.Popover,{content:react_1.default.createElement("div",{style:{padding:"10px",display:"flex"}},e.map((function(e){var n=PROPS_MAP[e];return react_1.default.createElement(n,{key:e,element:i,store:t})}))),position:core_1.Position.BOTTOM},react_1.default.createElement(core_1.Button,{icon:"more",minimal:!0,style:{marginLeft:"20px"}}))}}))}));